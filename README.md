# Электронная очередь студентов на защиту работ

## Описание

Многопользовательский веб-сервис для организации электронной очереди студентов на защиту лабораторных и практических работ у преподавателя.

Основные принципы:
- В каждый момент времени может существовать только одна активная очередь
- Преподаватель управляет очередью: запускает, вызывает студентов, ставит на паузу, завершает
- Студенты записываются в очередь, отслеживают свою позицию и получают уведомление о вызове

## Технологический стек

- **Backend:** Python 3.11 + Flask
- **База данных:** SQLite через SQLAlchemy
- **Frontend:** HTML + CSS + vanilla JavaScript с автообновлением каждые 5 секунд

## Структура проекта

```
main.py          — Flask-приложение, все API-эндпоинты и маршруты страниц
models.py        — Модели SQLAlchemy (Queue, QueueItem) и инициализация БД
templates/
  index.html     — Страница входа (выбор роли + ISU ID)
  teacher.html   — Панель преподавателя (управление очередью)
  student.html   — Интерфейс студента (запись, мониторинг статуса)
static/
  style.css      — Глобальные стили
```

## Роли пользователей

### Преподаватель
- Создание новой очереди (название дисциплины и работы)
- Вызов следующего студента
- Пауза / возобновление обслуживания
- Досрочное завершение очереди
- Просмотр списка студентов с их статусами и временем обслуживания
- Статистика: количество студентов, среднее время обслуживания, оценка времени до конца очереди

### Студент
- Запись в активную очередь
- Просмотр своей позиции и статуса
- Оценка времени ожидания
- Уведомление о вызове (зелёный баннер с анимацией)
- Просмотр общей информации об очереди

## API-эндпоинты

| Метод | Путь | Описание |
|-------|------|----------|
| POST | `/api/login` | Авторизация: установка ISU ID и роли в сессии |
| POST | `/api/logout` | Выход из системы |
| POST | `/api/queue/start` | Создание новой очереди (преподаватель) |
| POST | `/api/queue/pause` | Переключение паузы (преподаватель) |
| POST | `/api/queue/next` | Вызов следующего студента (преподаватель) |
| POST | `/api/queue/finish` | Завершение очереди (преподаватель) |
| GET  | `/api/queue/status` | Получение полного состояния активной очереди |
| POST | `/api/queue/enqueue` | Запись студента в очередь |
| GET  | `/api/queue/my_status` | Статус текущего студента в очереди |

## Запуск

```bash
python main.py
```

Приложение запустится на `http://0.0.0.0:5000`.

## Тестовые сценарии

### Сценарий преподавателя
1. Войти с любым ISU ID, выбрав роль «Я преподаватель»
2. Создать очередь, указав дисциплину и название работы
3. Дождаться записи студентов
4. Нажать «Вызвать следующего» для вызова студента
5. При необходимости поставить очередь на паузу и возобновить
6. Завершить очередь кнопкой «Завершить очередь»

### Сценарий студента
1. Войти с ISU ID, выбрав роль «Я студент»
2. Нажать «Записаться в очередь»
3. Наблюдать за своей позицией и оценкой времени ожидания
4. При вызове увидеть зелёный баннер «ВАС ВЫЗВАЛИ!»

### Обработка ошибок
- При попытке создать вторую активную очередь — отображается ошибка
- При попытке записаться повторно — отображается текущий статус
- При отсутствии активной очереди — студенту показывается сообщение об ожидании
